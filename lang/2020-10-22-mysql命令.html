<!doctype html>
<html lang="en">
<!--------------------------------------------------头部-------------------------------------------------------->
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.1/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.3.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="../css/offcanvas.css" rel="stylesheet">
    <title>go</title>
  </head>
<!--------------------------------------------------导航-------------------------------------------------------->
  <body class="bg-light" id="ups" name="ups">
<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark">
  <a class="navbar-brand mr-auto mr-lg-0" href="#">&nbsp;</a>
  <button class="navbar-toggler p-0 border-0" type="button" data-toggle="offcanvas">
    <span class="navbar-toggler-icon"></span></div>
  </button>

  <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <!-- <li class="nav-item active"><a class="nav-link" href="../#">Dashboard <span class="sr-only">(current)</span></div></a></li> -->
 <li class="nav-item"><a class="nav-link" href="../index.html">博客</a></li>
      <li class="nav-item active"><a class="nav-link" href="index.html">Lang</a></li>
    <!--   <li class="nav-item active"><a class="nav-link" href="../go.html">Go</a></li> -->
      <li class="nav-item"><a class="nav-link" href="../soft.html">软件</a></li>
      <li class="nav-item"><a class="nav-link" href="../site.html">导航</a></li>
<li class="nav-item"><a class="nav-link" href="../ejing.html">易经</a></li>
      <li class="nav-item"><a class="nav-link" href="../m/index.html">音乐</a></li>
 <li class="nav-item"><a class="nav-link" href="#">|</a></li>
      <li class="nav-item"><a class="nav-link" href="../head.html">头部</a></li>
      <li class="nav-item"><a class="nav-link" href="../women.html">女装</a></li>
      <li class="nav-item"><a class="nav-link" href="../man.html">男装</a></li>
      <li class="nav-item"><a class="nav-link" href="../ku.html">裤子</a></li>
      <li class="nav-item"><a class="nav-link" href="../bags.html">包</a></li>
      <li class="nav-item"><a class="nav-link" href="../child.html">儿童</a></li>
      <li class="nav-item"><a class="nav-link" href="../shoes.html">鞋</a></li>
      <li class="nav-item"><a class="nav-link" href="../sport.html">运动</a></li>
      <li class="nav-item"><a class="nav-link" href="../toy.html">玩具</a></li>
      <li class="nav-item"><a class="nav-link" href="../phone.html">手机</a></li>
      <li class="nav-item"><a class="nav-link" href="../pc.html">PC</a></li>
      <li class="nav-item"><a class="nav-link" href="../dian.html">小电器</a></li>
      <li class="nav-item"><a class="nav-link" href="../home.html">居家</a></li>
      <li class="nav-item"><a class="nav-link" href="../kitchen.html">厨房</a></li>
      <li class="nav-item"><a class="nav-link" href="../car.html">汽车</a></li>
      <li class="nav-item"><a class="nav-link" href="../medi.html">医药</a></li>
      <li class="nav-item"><a class="nav-link" href="../indus.html">工业</a></li>
      <li class="nav-item"><a class="nav-link" href="../ray.html">光</a></li>


      <!-- <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Settings</a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
      </li> -->
    </ul>
   <!--  <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form> -->
  </div>
</nav>
<!--------------------------------------------------二级导航-------------------------------------------------------->
<div class="nav-scroller bg-white shadow-sm">
  <nav class="nav nav-underline">

    <a class="nav-link active" href="index.html">Linux</a>
    <a class="nav-link" href="mom.html">内存</a>
    <a class="nav-link " href="go.html">Go</a>
    <a class="nav-link" href="php.html">PHP</a>
  </nav>
</div>
<!--------------------------------------------------内容-------------------------------------------------------->
<main role="main" class="container">
<!---------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------->

<div class="row"><div class="col-xs-12 col-md-12 btit"><a href="../lang/index.html">Mysql命令</a></div></div>
<div class="row"><span class="txt">
教程：https://www.bilibili.com/video/av57575364
数据库：
  使用专业的数据管理系统，管理数据更方便。常用数据库有Mysql,Oracle,DB2,MS SQLserver,Sybase。银行政府等传统行业oracle居多，互联网公司开源mysel居多。标准的SQL语句适用于所有数据库产品，SQL是高级语言。SQL执行时候底层先编译在执行。DBMS执行SQL语句来操作DB。
  SQL语句单引号扩起来，SQL不区分大小写，字段内容区分大小写。select可以运算，函数，输出，变量操作。数据库中数学运算中和null运算结果都是null。
  数据库的基本组成单位是表，表是记录(行)和字段(列)构成。字段由名字，类型，约束组成。行叫记录(data)列叫做字段(column)。表的别名是可读性好，执行效率高。[ select a.aname,b.bname from usera a,userb b; ]
  表数据类型：int(整型),bigint(大整型),char(字符串),varchar(可变字符串),date(日期),BLOB(图片，视频二进制象),CLOB(大本文字符大对象)。表名字一般t_或_开头。varchar(255)数字代表字255节。CHAR：索引效率高，固定长度，char(10)=长度是十字节不到十的用空格填充，索引时候空格隐藏，检索出来的数据需用trim之类的函数去过滤空格。VARCAHR：存储变长数据，但存储效率没有CHAR高，必须在括号里定义长度，可以有默认值。保存数据的时候，不进行空格自动填充，而且如果数据存在空格时，当值保存和检索时尾部的空格仍会保留。另外，它的实际长度是它的值的实际长度+1，这一个字节用于保存实际使用了多大的长度。    TEXT：可变长度的非Unicode数据，最大长度为2^31-1个字符。text列不能有默认值，存储或检索过程中，不存在大小写转换，后面如果指定长度，不会报错误，但是这个长度是不起作用的，意思就是你插入数据的时候，超过你指定的长度还是可以正常。
  存储引擎是表的存储方式，合适的时机选择合适的存储引擎。MySQL特有的方式。建表时候可以用指定存储引擎和字符集。
show engines \g;
  InnoDB是默认存储引擎。支持事物，外键，最安全，数据崩溃后恢复机制。。
  MyISAM是最常用存储引擎，一张表三个文件构成，索引，表结构，表数据。可以被压缩节省空间，转为只读表。
  MEMORY不支持事物，数据容易丢失，存储内存中，适合查询 。
</span></div>

<div class="row"><span class="txt">登录与密码：</span></div>
<div class="row"><pre><code>
vim /etc/my.cnf          ###忘记密码的话，在[mysqld]的段中加上一句：skip-grant-tables
mysql -h 127.0.0.1 -uroot -p123456                                 ###用户root密码123456
update mysql.user set authentication_string=password('ROOT') where user='ROOT';    ###修改密码
</code></pre></div>

<div class="row"><span class="txt">操作语句：</span></div>
<div class="row"><pre><code>
DQL(数据查询语言)：select语句。
DML(数据操作语言)：insert,update,delete对表内进行修改。
DDL(数据定义语言)：create,drop,alert对表进行修改。
TCL(事物控制语句)：commit提交事物,rollback滚回事物。
DCL(数据控制语句)：grant,remove对权限的操作。
source 命令可以批量执行SQL语句的文本脚本。
</code></pre></div>

<div class="row"><span class="txt">数据库：</span></div>
<div class="row"><pre><code>
show databases;     ### 显示数据库
create database 数据名;
create database 数据名 character set utf8 collate utf8_general_ci; ### 注意先写character 
select database();  ### 当前数据库
use 数据名;          ### 选择数据库
</code></pre></div>

<div class="row"><span class="txt">表操作：</span></div>
<div class="row"><pre><code>
创建：
create table 表名(
     字段1 数据类型 约束,   ###约束：default,primary key,auto_increment,unique
     字段2 数据类型 约束,
     ....
);
 
约束：表的相关字段添加约束，保证合法性，有效性，完整性。not null(非空),default(默认值)
unique：唯一约束，可以NULL，列后面添加列的约束，多个字段联合约束unique(字段1,字段2...)
create table 表(id int,user varchar,unique(id,user));   ###id和user联合约束
create table 表(id int unique,user varchar unique);   ###id和user单个字段约束
 
primary key：主键约束不能重复且不能为空。主键是一张表中的记录的唯一标识。一张表只能有主键。
业务相关的字段不要做主键，主键最好是个自然数。
create table 表(id int,user varchar,primary key(id));   ### 表级约束
create table 表(id int primary key auto_increment);   ### auto_increment 自动增加id
 
foreign key：外键约束是必须和另个表的字段引用不能随便输入。先创建父表，在创建子表，删除相反。
外键可以为NULL。被引用的字段必须唯一性。
create table 表1(id int primary key);   ### 父表
create table 表2(id int,forign key(id) references 表1(id));    ### 子表id字段引用父表id字段内容
 
查看：
show tables;   ### 显示所有表
desc 表名;      ### 表结构
删除：
drop table if exists 表名;      ###删除表，oracle不支持
drop table 表名;
</code></pre></div>

<div class="row"><span class="txt">#表内操作：</span></div>
<div class="row"><pre><code>
复制：
create table 表名 as select *** ;    ###select语句结果复制
insert into 表名 select *** ;    ### 插入时候表结构
插入：
###每次插入一条记录，可以插入单个字段或的记录，没插入的字段null
insert into user1(name,email) values('lala','lala@qq.com'); //主键是自动
insert into 表名(字段1,字段2,字段3...) values(值1,值2,值3...),(值1,值2,值3...); 
insert into 表名(字段1,字段2,字段3...) values(值1,值2,值3...);   
insert into values(值1,值2,值3...); 
insert into set 字段1=值1,字段2=值2,字段3=值3... ;
更新：
update 表名 set 字段1=值1,字段2=值2,字段3=值3... where 条件;
删除：
delete from 表名 where 条件;
delete from t_user where id=5;     ### 删除id为5的记录
truncate table 表名;    ###删除表中大数据
</code></pre></div>

<div class="row"><span class="txt">查询：</span></div>
<div class="row"><span class="txt">
  select是把要查询的字段写入到内存。，分组函数自动忽略null。分组(group by)和分组函数联合使用，select后面只有分组字段和分组函数。尽量能在where后处理的现在where后处理，where后不能有分组函数。
单表查询：
  数据库当中null不是个值，不能用等号，0.0根null有区别。and的优先级高于or。多个运算及不确定优先级时候用小括号，小括号内优先级最高。in等同于or。
</span></div>
<div class="row"><pre><code>select *** from *** where *** group by *** having *** order by *** limit; ##DQL语句顺序：</code></pre></div>
<div class="row"><pre><code>
##and(and优先级大于or),or,not,\<\>,>=,<=,>,<,=,like(类似),between(区间),is null
sal是工资，ename是名，jobs工作，num编号，users表名
select ename from users where sal = 5000;     ###工资等于5000
select ename,sal from users where sal > 3000;   ###工资大于3000
select ename,sal from users where sal \<\> 3000;  ###工资不等于5000
select ename,sal from users where sal > 1000 and sal < 3000;  ###工资1000到3000
select ename,sal from users where sal between 1000 and 3000;  ###工资1000到3000
select ename,sal from users where sal between 'A' and 'b';    ###可以用在字符串
select ename,sal from users where sal is null;            ###sal为null的，is not null
select ename,sal from users where sal is null or sal = 0;     ###没有工资的人
select ename,sal from users where sal = 500 or sal = 1000;    ###工资等于500或1000
select ename,sal from users where in(500,1000);               ###工资等于500或1000
select ename,jobs from users where jobs = 'manager' or jobs 'ceo';    ###找出jobs为manager和jobs的员工
select ename,sal,num from users where sal > 3000 and (num = 20 or num = 30);    ###工资大于3000,num=20或num=30
select ename,sal from users order by sal asc;  ###用工资的升序
select ename,sal from users order by sal desc, ename asc;   ###多个字段排序，越考前的主导作用越大，sal相等时候在ename asc排序
</code></pre></div>

<div class="row"><span class="txt">条件查询：</span></div>
<div class="row"><pre><code>
select * from 表名;      ###查询全部字段
select 字段1,字段2 from 表名;                               ###字段查询
select 字段 from 表名 desc;                          ###字段查询(asc正序,desc反序)可以组合
select id from 表名 where id between 5 and 15;      ###id 5-15之间
select id from 表名 where id is null;               ###id 不是空 
select name from 表名 where like '%hao_';      ### %任意多字符，_任意一个字符
select name from 表名 where in('字段1','字段2');      ### 查询两条记录，等同于or
select distinct 字段1,字段2 from 表名;     ### distinct去重复 
select ifnull(字段,替换内容) from 表名;     ###如果字段为空替换
 
select max(字段1),jobs from users group by 字段2;    ###先jobs字段组合，然后是sal字段最大值
#分组函数自动忽略空，分组函数有sum(),count(),max(),min(),avg()
 
#union两张表的内容合并显示，两张表的列要相同。
select ename from 表1 where job='字段'
union
select id from 表2 where job='字段';
 
limit(MySQL特有机制)取结果的部分数据，格式：limit 开始下标,多个字节;
select id form 表 order by id limit 0,10;     ### 0下标开始10个字段
limit (PageNo - 1)*PageSize, PageSize         ###用分页代码
 
#子查询是select语句嵌套select语句，select查询结果当作参数。select,from,where之后都可以切入。
#id>18 and (name='user1' or name='user3');  ###and优先级高于or
</code></pre></div>

<div class="row"><span class="txt">
多表连接查询：
笛卡尔乘积现象是两张表联合查询时候，没有任何条件限制，最终的查询结果是两张表记录的乘积。加条件只是显示有效性。</span></div>
<div class="row"><pre><code>select aname,bname from user2,user2; ###假设aname和bname都有10个记录。结果是100。</code></pre></div>

<div class="row"><span class="txt">
分组函数查询：
  分组函数对一组数据进行操作的，也叫多行处理函数，分组函数自动忽略NULL。分组函数与gourp by联合使用，分组函数在gourp by语句后执行，默认没有group by的话把整个表合成一个表。where后不能使用分组函数。当一条语句gourp by的话select后面只能使用分组函数和group by的字段。NULL字段的运算结果都是NULL。
</span></div>
<div class="row"><pre><code>
分组：
select count(sal) from user;    ###sal字段多少行
select avg(sal) from user;        ###sal字段平均
select max(sal) from user;        ###sal字段最大
select min(sal) from user;        ###sal字段最大
select sum(sal) from user;        ###sal字段综合
select sum(sal),max(sal) from user;    ###分组函数可以组合查询
select name,(sal + num) * 12 from user;  ###num字段当中NULL出现，运算结果都是NULL
 
group by：
select max(sal),job,num from user group by job,num; ###找出每个工作岗和不同编号的最高工资，把多个字段看成一个字段分组。
select name,sal from user where sal > (select avg(sal) from user);  ###高于平均工资的人
</code></pre></div>



<div class="row"><span class="txt">
事务：
  一个事务(TCL)就是多条DML语句(insert,delete,update)组成一组，这一组语句同时成功才算写入硬盘才算完成事物。(比如银行转账一个账户扣款，另一个账户增加)。事务提交之前暂存到历史记录(缓存)，rollback是退回到历史记录之前，commit是历史记录提交到硬盘。默认事物是自动提交，只要执行DML语句就自动提交。关闭：start transaction语句。MySQL默认隔离级别是可重复读。
</span></div>
<div class="row"><pre><code>
事务特性：
原子性：事务最小的工作单元，不可在分。
一致性：事物必须保证多条DML语句同时失败或者同时成功。
隔离性：事务A和事务B具有隔离性。
持久性：数据最终会持久话到硬盘才算成功。
 
设置事务隔离级别：
set global transaction isolation level read uncommitted; ###读未提交数据隔离
set global transaction isolation level read committed;   ###读已提交隔离
set global transaction isolation level repeatable read;  ###读备份数据
set global transaction isolation level serializable;   ###排队读，如果没数据可读一直等着
 
查看隔离级别： 
select @@global.tx_isolation;
</code></pre></div>

<div class="row"><span class="txt">
索引：
  索引相当于一本书的目录，通过索引找到书的内容。数据库查询方式全表扫描和索引检索。不能随意添加索引。索引通过B Tree缩小扫描，底层索引进行排序，分区，索引会携带数据表中物理地址，通过物理地址找到数据。like模糊查询第一个字母通配符'%'无法定位索引。索引分类：单一索引，复合索引，主键索引，唯一索引。索引要求数据量庞大，很少该字段DML操作，某些字段添加。where后经常出现的字段添加索引。主键和unique约束的自动添加索引。
</span></div>
<div class="row"><pre><code>
explain select * from user;
创建：
create index 索引名 on 表名(字段);    ###某字段上添加索引
删除：
drop index 索引名 on 表名;
</code></pre></div>

<div class="row"><span class="txt">视图：</span></div>
<div class="row"><pre><code>
创建视图：
create view 视图名 as select 字段1,字段2 frome 表名;
删除视图：
drop view 视图名;
</code></pre></div>

<div class="row"><span class="txt">备份：</span></div>
<div class="row"><pre><code>
数据备份：
mysqldump 数据名>文件名.sql -u root -p 密码;
导入：
source ./文件名.s
</code></pre></div>

<div class="row"><span class="txt">权限：</span></div>
<div class="row"><pre><code>
查看用户：
select * from mysql.user
添加：
grant all privileges on DBNAME.* to user@localhost identified by 'PASSWORD';    /* user用户对dbname数据有所有权限 */
grant all privileges on *.* to user@127.0.0.1 identified by 'PASSWORD';    /* user所有数据库的所有表进行所有操作的权限 */
删除：
Delete FROM user Where User='test' and Host='localhost';
修改密码：
update mysql.user set password=password('新密码') where User="test" and Host="localhost";
权限：
show grants for root@'localhost';    #查看权限
</code></pre></div>

<div class="row"><span class="txt">
表设计：
  第一范式：任何一张表都有主键，并且每个字段原子性不可在分。
  第二范式：建立在第一范式基础上，所有分主键字段完全依赖主键，不能产生部分依赖。多对多，三张表，关系表两个外键。
  第二范式：第二范式基础上，所有非主键字段直接依赖主键，不能产生传递依赖。
</span></div>
<!-- <div class="row"><pre><code>#####</code></pre></div>

<div class="row"><span class="txt">#####</span></div>
<div class="row"><pre><code>#####</code></pre></div>

<div class="row"><span class="txt">#####</span></div>
<div class="row"><pre><code>#####</code></pre></div>

<div class="row"><span class="txt">#####</span></div>
<div class="row"><pre><code>#####</code></pre></div> -->

<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<div class="row"><hr></div>
</main>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="../css/offcanvas.js"></script>
<div class="goTop" id="js-go_top"><a href="#ups"><img src="../css/icon_top.png" alt="回到顶部图片"></a></div>
<script src="../css/GoToTop.js"></script>

  </body>
</html>