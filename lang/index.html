<!doctype html>
<html lang="en">
<!--------------------------------------------------头部-------------------------------------------------------->
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link href="../css/offcanvas.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <title>Linux</title>
  </head>
<!--------------------------------------------------导航-------------------------------------------------------->
  <body class="bg-light">
<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark">
  <a class="navbar-brand mr-auto mr-lg-0" href="#">&nbsp;</a>
  <button class="navbar-toggler p-0 border-0" type="button" data-toggle="offcanvas">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <!-- <li class="nav-item active"><a class="nav-link" href="../#">Dashboard <span class="sr-only">(current)</span></a></li> -->
      <li class="nav-item active"><a class="nav-link" href="#">Lang</a></li>
      <li class="nav-item"><a class="nav-link" href="../index.html">软件</a></li>
      <li class="nav-item"><a class="nav-link" href="../site.html">导航</a></li>
<li class="nav-item"><a class="nav-link" href="../ejing.html">易经</a></li>
      <li class="nav-item"><a class="nav-link" href="../m/index.html">音乐</a></li>
 <li class="nav-item"><a class="nav-link" href="#">|</a></li>
      <li class="nav-item"><a class="nav-link" href="../head.html">头部</a></li>
      <li class="nav-item"><a class="nav-link" href="../women.html">女装</a></li>
      <li class="nav-item"><a class="nav-link" href="../man.html">男装</a></li>
      <li class="nav-item"><a class="nav-link" href="../ku.html">裤子</a></li>
      <li class="nav-item"><a class="nav-link" href="../bags.html">包</a></li>
      <li class="nav-item"><a class="nav-link" href="../child.html">儿童</a></li>
      <li class="nav-item"><a class="nav-link" href="../shoes.html">鞋</a></li>
      <li class="nav-item"><a class="nav-link" href="../sport.html">运动</a></li>
      <li class="nav-item"><a class="nav-link" href="../toy.html">玩具</a></li>
      <li class="nav-item"><a class="nav-link" href="../phone.html">手机</a></li>
      <li class="nav-item"><a class="nav-link" href="../pc.html">PC</a></li>
      <li class="nav-item"><a class="nav-link" href="../dian.html">小电器</a></li>
      <li class="nav-item"><a class="nav-link" href="../home.html">居家</a></li>
      <li class="nav-item"><a class="nav-link" href="../kitchen.html">厨房</a></li>
      <li class="nav-item"><a class="nav-link" href="../car.html">汽车</a></li>
      <li class="nav-item"><a class="nav-link" href="../medi.html">医药</a></li>
      <li class="nav-item"><a class="nav-link" href="../indus.html">工业</a></li>
      <li class="nav-item"><a class="nav-link" href="../ray.html">光</a></li>


    <!--   <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Settings</a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
      </li> -->
    </ul>
    <!-- <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Go</button>
    </form> -->
  </div>
</nav>
<!--------------------------------------------------二级导航-------------------------------------------------------->
<div class="nav-scroller bg-white shadow-sm">
  <nav class="nav nav-underline">
     
    <a class="nav-link active" href="index.html">Linux</a>
    <a class="nav-link" href="mom.html">内存</a>
    <a class="nav-link " href="go.html">Go</a>
    <a class="nav-link" href="php.html">PHP</a>
  </nav>
</div>
<!--------------------------------------------------内容-------------------------------------------------------->
<main role="main" class="container-fluid">
<!---------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------->
<div class="row"><div class="col-xs-12 col-md-12 btit">配置</div></div>
<div class="row">
<p>
<a class="btn btn-light" type="button"  href="../bash/nginx.conf" target="_blank">nginx conf 7</a>
<a class="btn btn-light" type="button"  href="../bash/nginxSSL.conf" target="_blank">nginxSSL 7</a>
<a class="btn btn-light" type="button"  href="../bash/nginxSSL.conf" target="_blank">nginxProxy 7</a></p>



</div>

<!---------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------->
<div class="row"><div class="col-xs-12 col-md-12 btit">Linux配置</div></div>
<pre>
wget https://moru.gq/ins.sh && chmod +x ins.sh && ./ins.sh
wget https://raw.githubusercontent.com/yuukuun/daoh/main/ins.sh && chmod +x ins.sh && ./ins.sh
git add . && git status -sb && git commit -m "$(date +%Y.%m.%d-%H:%M)" && git push

###快捷键
Ctrl + C    #强制终止
Ctrl + L    #清屏
Ctrl + U    #光标前剪切，删除
Ctrl + Y    #粘贴
Ctrl + R    #历史命令查询

sed -i '/site.html/a\ssssssssssss' *.html
sed -i '/对配内容/a \新内容' *.html  ###对配内容后行插入
sed -i '/对配内容/d' *.html  ###对配内容行删除
sed -i 's/ejing.html">博客/ejing.html">易经/g' *.html   ###分隔符 % / !
sed -i 's/href="..\/soft.html">软件/href="..\/index.html">软件/g' *.html 

###代理 vim .ssh/config #ssh，rsync都可以总代理
Host github.com 11.22.33.44
ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p
#ProxyCommand ncat --proxy-type socks5 --proxy 127.0.0.1:1080 %h %p
ServerAliveInterval  20 ###每20秒链接一次

ssh root@11.22.33.44 -p 22 ~/.ssh/id_rsa
rsync -av -e 'ssh root@11.22.33.44 -p 22 -i ~/.ssh/id_rsa' --exclude={'目录',} /root/* root@:/root/ ###--exclude={'目录',}排除目录


</pre></div>

<!---------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------->
<div class="row"><div class="col-xs-12 col-md-12 btit">git安装设置</div></div>
<pre>
###配置
ssh -T -p 22 git@github.com -i ~/.ssh/id_rsa    ###测试
git config --global user.name "username"    ###设置用户名
git config --global user.email "user@gmail.com"    ###设置邮箱

###  <a href="https://github.com/yuukuun/tool/commits/master/" target="_blank">这里修改状态</a>
git status -sb ###本地与远程是否一致
git rm --f centos7Set.sh ###删除
git add * ###它能stages所有文件，包括之前删除的痕迹
git add . ###只能stages新文件和被修改的文件,不会stages已被删除的文件
git commit -m "$(date +%Y.%m.%d-%H:%M)"
git branch -d name.txt  ###删除本地分支
git push origin --delete name.txt ###删除远程分支
git rm -r --cached .  ###清楚缓存

### 忽略上传的文件目录
vim .gitignore

m   #忽略m目录
soft #忽略soft目录
backup #忽略backup目录

###本地手动删除，在到同步远程
git add . && git status -sb && git commit -m "$(date +%Y.%m.%d-%H:%M)" && git push
</pre>
<!---------------------------------------------------------------------------------------------------------------------------->
<!---------------------------------------------------------------------------------------------------------------------------->
<div class="row"><div class="col-xs-12 col-md-12 btit">git安装设置</div></div>
<span class="txt" >if语句</span>
<pre>
temp=$(cat /etc/redhat-release)
if [[ "$temp" == "CentOS Linux release 8"* ]]; then
        echo "CentOS 8"
elif [[ "$temp" == "CentOS Linux release 7"* ]];then
        echo "CentOS 7"
else
    echo "##### CentOS error !!! #####"
fi
</pre>

<span class="txt" >firewall防火墙</span>
<pre>
firewall-cmd --state                ###状态
systemctl start firewalld.service    ###启动防火墙
firewall-cmd --add-service=https    ###添加服务https
firewall-cmd --add-port=8080/tcp    ###添加端口8080
firewall-cmd --add-rich="rule family=ipv4 source address=6.6.6.6 drop" ###ip丢弃
firewall-cmd --runtime-to-permanent
firewall-cmd --reload 
</pre>

<div class="row"><div class="col-xs-12 col-md-12 btit">https证书，ssl证书， <a href="https://certbot.eff.org/" target="_blank" >Let’s Encrypt证书</a>:</div></div>
<span class="txt" >certbot</span>
<pre>
###安装。根据官方安装
yum install -y certbot python2-certbot-nginx
 
###出错就解决
sudo yum remove epel-release
sudo yum install -y epel-release
pip install --upgrade --force-reinstall 'requests==2.6.0' urllib3
 
###单域名证书
certbot certonly --webroot -w /usr/local/nginx/html/ -d $url -m 0@yahoo.com --agree-tos --test-cert -n ### --test-cert测试模式 -n不交互
 
###通配符域名证书
certbot -d baidu.cn -d "*.baidu.cn" --manual --preferred-challenges dns-01 --server https://acme-v02.api.letsencrypt.org/directory certonly \
-m 123@gmail.com --agree-tos
 
###自动通配符证书，需要域名验证
wget https://dl.eff.org/certbot-auto && chmod a+x certbot-auto
./certbot-auto -d "*.mgleek.cn" --manual --preferred-challenges dns-01 certonly -m 1233@qq.com --agree-tos \
--server https://acme-v02.api.letsencrypt.org/directory
 
###续费
echo '5 4 * * 2 /usr/bin/certbot renew --dry-run "/usr/local/nginx/sbin/nginx -s reload"' >> /var/spool/cron/root
###删除
certbot certificates
certbot delete --cert-name example.com
</pre>

<span class="txt" >acme.sh</span>
<pre>
1.安装：
wget -O -  https://get.acme.sh | sh
acme.sh -h  ###检查
~/.acme.sh/dnsapi/  ###支持的DNS
 
2.DNS解析添加KEY：
阿里云：https://ak-console.aliyun.com/#/accesskey
~/.bashrc文件中添加阿里云的“AccessKey ID”和“Access Key Secret”
export Ali_Key="sdfsdfsdfljlbjkljlkjsdfoiwje"
export Ali_Secret="jlsdflanljkljlfdsaklkjflsa"
 
CloundFlare获取证书：MyProfile中Global API key和Origin API key
~/.bashrc文件中添加这个两个变量
export [email protected]
export CF_Key=85302dsiorw3oisjdkf899234sdf72dfdb46
 
3.安装证书：
acme.sh --issue --dns dns_cf -d domain.com -d '*.domain.com'   
### 制定DNS和域名，dns_cf是CloudFlare
 
4.拷贝证书到nginx目录
acme.sh --install-cert -d 'domain.com' --key-file /usr/local/nginx/ssl/domain.com/private.pem --fullchain-file /usr/local/nginx/ssl/domain.com/fullchain.pem \
--reloadcmd "nginx -s reload"
 
5.自动续期
0 0 * * * "/root/.acme.sh"/acme.sh --cron --home "/root/.acme.sh" >> /var/log/acme.sh-auto-renew.log
acme.sh --cron  ###续期情
</pre>

<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<!-- ------------------------------------------------------------------------------------------------------------------------------------------------------------ -->
<div class="up"><a href="#top" target="_self"><img src="../css/top.png" class="img-fluid" alt="Responsive image"></a></div> <!-- 回到顶部  -->
<div class="row hou"><hr></div>
</main>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="../css/offcanvas.js"></script>
  </body>
</html>